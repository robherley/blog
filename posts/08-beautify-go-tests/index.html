<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>ðŸŽ¨ Beautify your Go tests on GitHub Actions | rob's blog</title><link rel=canonical href=https://blog.reb.gg/posts/08-beautify-go-tests/><meta name=description content="ðŸ‘‹ Hey y'all. This blog is my documented journey working with various aspects of technology. I'll try my best to keep things coherent and interesting, and hopefully I can teach a few people along the way."><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="ðŸŽ¨ Beautify your Go tests on GitHub Actions"><meta property="og:description" content="Was this made for humans? Although simple, Go&rsquo;s default testing output leaves a lot to be desired:
This has led rise to some other wrappers for go test, solely to be a better formatter for humans. For example, gotestsum does this quite well:
This is definitely an improvement, and gotestsum even has additional formatting like exporting to JUnit XML.
But, what if CI could produce a rich, interactive, summary like this:"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.reb.gg/posts/08-beautify-go-tests/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-23T00:51:58-04:00"><meta property="article:modified_time" content="2022-07-23T00:51:58-04:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ðŸŽ¨ Beautify your Go tests on GitHub Actions"><meta name=twitter:description content="Was this made for humans? Although simple, Go&rsquo;s default testing output leaves a lot to be desired:
This has led rise to some other wrappers for go test, solely to be a better formatter for humans. For example, gotestsum does this quite well:
This is definitely an improvement, and gotestsum even has additional formatting like exporting to JUnit XML.
But, what if CI could produce a rich, interactive, summary like this:"><link rel=stylesheet href=https://blog.reb.gg/css/styles.a20e9ff7e4966e5e04f7c5bb633c3e427d0e10d8d676b3c4b81da08966c34bd718f4bf0b40f3a4a8cb8495678b39d8007406db2549bc420e2c2e8086708b958c.css integrity="sha512-og6f9+SWbl4E98W7Yzw+Qn0OENjWdrPEuB2giWbDS9cY9L8LQPOkqMuElWeLOdgAdAbbJUm8Qg4sLoCGcIuVjA=="><link rel=stylesheet href=https://blog.reb.gg/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://blog.reb.gg/images/favicon.ico><script async src=https://unpkg.com/mermaid@latest/dist/mermaid.min.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://blog.reb.gg/posts/07-go-tiny-coffee/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&text=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&is_video=false&description=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions&body=Check out this article: https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&name=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions&description=Was%20this%20made%20for%20humans%3f%20Although%20simple%2c%20Go%26rsquo%3bs%20default%20testing%20output%20leaves%20a%20lot%20to%20be%20desired%3a%0aThis%20has%20led%20rise%20to%20some%20other%20wrappers%20for%20go%20test%2c%20solely%20to%20be%20a%20better%20formatter%20for%20humans.%20For%20example%2c%20gotestsum%20does%20this%20quite%20well%3a%0aThis%20is%20definitely%20an%20improvement%2c%20and%20gotestsum%20even%20has%20additional%20formatting%20like%20exporting%20to%20JUnit%20XML.%0aBut%2c%20what%20if%20CI%20could%20produce%20a%20rich%2c%20interactive%2c%20summary%20like%20this%3a" aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&t=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><div style=margin-bottom:2rem><a href=https://blog.reb.gg/><i class="fas fa-angle-left"></i> Back</a></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">ðŸŽ¨ Beautify your Go tests on GitHub Actions</h1><div class=meta><div class=postdate><time datetime="2022-07-23 00:51:58 -0400 -0400" itemprop=datePublished>2022 Jul 23</time></div><div class=article-read-time><i class="far fa-clock"></i>
3 minute read</div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/golang rel=tag>golang</a>
,
<a class=tag-link href=/tags/testing rel=tag>testing</a>
,
<a class=tag-link href=/tags/github rel=tag>github</a>
,
<a class=tag-link href=/tags/actions rel=tag>actions</a></div></div></header><div id=toc><nav id=TableOfContents><ul><li><a href=#was-this-made-for-humans>Was this made for humans?</a></li><li><a href=#actions-job-summaries>Actions Job Summaries</a></li><li><a href=#introducing-go-test-action>Introducing: <code>go-test-action</code></a></li><li><a href=#but-how-does-it-work>But how does it work?</a></li><li><a href=#contribute>Contribute!</a></li></ul></nav></div><div class=content itemprop=articleBody><h2 id=was-this-made-for-humans>Was this made for humans?</h2><p>Although simple, Go&rsquo;s default testing output leaves a lot to be desired:</p><p><img src=/content/beautify-go-tests/gotest.png alt="go test output"></p><p>This has led rise to some other wrappers for <code>go test</code>, solely to be a better formatter for humans. For example, <a href=https://github.com/gotestyourself/gotestsum><code>gotestsum</code></a> does this quite well:</p><p><img src=/content/beautify-go-tests/gotestsum.png alt="gotestsum output"></p><p>This is definitely an improvement, and <code>gotestsum</code> even has additional formatting like exporting to JUnit XML.</p><p>But, what if CI could produce a rich, interactive, summary like this:</p><p><img src=/content/beautify-go-tests/gotestaction.png alt="gotestaction overview"></p><p>And interactive expansion for more details:</p><p><img src=/content/beautify-go-tests/gotestaction2.png alt="gotestaction expansion"></p><p>(Check out the <a href=https://github.com/robherley/go-test-example/actions/runs/2725452630/attempts/1#summary-7484360764>example here</a>!)</p><h2 id=actions-job-summaries>Actions Job Summaries</h2><p>One of the great features my team released recently was GitHub Actions <a href=https://github.blog/2022-05-09-supercharging-github-actions-with-job-summaries/>Job Summaries</a>. If you haven&rsquo;t heard of it yet, it&rsquo;s a very simple way to get Markdown content as an output for a GitHub Actions job.</p><p>It&rsquo;s relatively easy to use, we provide two mechanisms to write summary content:</p><ol><li>Writing <a href=https://github.github.com/gfm/>GitHub Flavored Markdown</a> to the file at <code>$GITHUB_STEP_SUMMARY</code> on all GitHub Actions runners.</li><li>Utilizing the <code>@actions/core</code>&rsquo;s TypeScript <a href=https://github.com/actions/toolkit/blob/main/packages/core/src/summary.ts>helper library</a>.</li></ol><p>And the latter is what I used to create <a href=https://github.com/robherley/go-test-action><code>go-test-action</code></a>.</p><h2 id=introducing-go-test-action>Introducing: <code>go-test-action</code></h2><p>It should be easy to get a pretty test summary.</p><p>With <code>go-test-action</code>, all you need is to replace <em>one line</em> in your Actions Workflow:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=display:flex><span>name: CI
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>on:
</span></span><span style=display:flex><span>  push:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jobs:
</span></span><span style=display:flex><span>  test:
</span></span><span style=display:flex><span>    runs-on: ubuntu-latest
</span></span><span style=display:flex><span>    steps:
</span></span><span style=display:flex><span>    - uses: actions/checkout@v3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - name: Set up Go
</span></span><span style=display:flex><span>      uses: actions/setup-go@v3
</span></span><span style=display:flex><span>      with:
</span></span><span style=display:flex><span>        go-version: 1.18
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - name: Build
</span></span><span style=display:flex><span>      run: go build -v ./...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - name: Test
</span></span><span style=display:flex><span><span style=color:#f55>-     run: go test ./...
</span></span></span><span style=display:flex><span><span style=color:#f55></span><span style=color:#50fa7b;font-weight:700>+     uses: robherley/go-test-action@v0.1.0
</span></span></span></code></pre></div><p>If your test parameters are a bit more complicated or if you want to customize the summary structure, there are a few <a href=https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepswith>inputs</a> that you can use:</p><table><thead><tr><th>Input</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>moduleDirectory</td><td><code>.</code></td><td>relative path to the directory containing the <code>go.mod</code> of the module you wish to test</td></tr><tr><td>testArguments</td><td><code>./...</code></td><td>arguments to pass to <code>go test</code>, <code>-json</code> will be prepended automatically</td></tr><tr><td>omitUntestedPackages</td><td><code>false</code></td><td>omit any go packages that don&rsquo;t have any tests from the summary output</td></tr><tr><td>omitPie</td><td><code>false</code></td><td>omit the pie chart from the summary output</td></tr></tbody></table><p>So if you really hate ðŸ¥§, you can change your Workflow to omit it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>    - <span style=color:#ff79c6>name</span>: Test
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>uses</span>: robherley/go-test-action@v0.1.0
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>omitPie</span>: <span style=color:#ff79c6>true</span>
</span></span></code></pre></div><p>For the most up-to-date list of inputs, check out the <a href=https://github.com/robherley/go-test-action/blob/main/action.yml>action.yml</a></p><h2 id=but-how-does-it-work>But how does it work?</h2><p>When executing the tests, <code>go-test-action</code> will prepend the arguments with <code>-json</code>, that will convert the output to JSON using <a href=https://pkg.go.dev/cmd/test2json>test2json</a>.</p><p>The <code>test2json</code> JSON output is structured like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>type</span> TestEvent <span style=color:#8be9fd;font-style:italic>struct</span> {
</span></span><span style=display:flex><span>	Time    time.Time
</span></span><span style=display:flex><span>	Action  <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>	Package <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>	Test    <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>	Elapsed <span style=color:#8be9fd>float64</span>
</span></span><span style=display:flex><span>	Output  <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The actual output is a bit chunky:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.92576-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;?   \tgithub.com/robherley/go-test-example\t[no test files]\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.926603-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;skip&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example&#34;</span>,<span style=color:#ff79c6>&#34;Elapsed&#34;</span>:<span style=color:#bd93f9>0.001</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931066-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;run&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931141-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;=== RUN   TestSuccess\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931166-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;run&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(1)&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931185-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(1)&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;=== RUN   TestSuccess/Subtest(1)\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931204-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(1)&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;    success_test.go:19: hello from subtest #1\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931239-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;run&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(2)&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931284-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(2)&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;=== RUN   TestSuccess/Subtest(2)\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.9313-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;output&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(2)&#34;</span>,<span style=color:#ff79c6>&#34;Output&#34;</span>:<span style=color:#f1fa8c>&#34;    success_test.go:19: hello from subtest #2\n&#34;</span>}
</span></span><span style=display:flex><span>{<span style=color:#ff79c6>&#34;Time&#34;</span>:<span style=color:#f1fa8c>&#34;2022-07-10T22:42:11.931315-04:00&#34;</span>,<span style=color:#ff79c6>&#34;Action&#34;</span>:<span style=color:#f1fa8c>&#34;run&#34;</span>,<span style=color:#ff79c6>&#34;Package&#34;</span>:<span style=color:#f1fa8c>&#34;github.com/robherley/go-test-example/success&#34;</span>,<span style=color:#ff79c6>&#34;Test&#34;</span>:<span style=color:#f1fa8c>&#34;TestSuccess/Subtest(3)&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#6272a4>// and more!
</span></span></span></code></pre></div><p>This JSON output is parsed, grouped and aggregated like so:</p><ul><li>For every <em>package level</em> test, group the following:<ul><li>Count tests that have a <em>conclusive</em> attribute. Conclusive meaning their <code>test2json</code> output <code>Action</code> is either is <code>pass</code>, <code>fail</code> or <code>skip</code>.</li><li>Repeat above for any subtests with a test (subtests in go with <a href=https://pkg.go.dev/testing#hdr-Subtests_and_Sub_benchmarks><code>T.Run</code></a> are naively indicated with a <code>/</code> in their name)</li></ul></li></ul><p>This logic is split between the <a href=https://github.com/robherley/go-test-action/blob/6a4c0a24d1b6c6df89b9aa634ac98682e4dedced/src/events.ts#L46><code>parseTestEvents</code></a> function and the <a href=https://github.com/robherley/go-test-action/blob/6a4c0a24d1b6c6df89b9aa634ac98682e4dedced/src/results.ts#L11><code>PackageResult</code></a> class. And once it&rsquo;s all parsed, the attributes are rendered to Markdown by the <a href=https://github.com/robherley/go-test-action/blob/6a4c0a24d1b6c6df89b9aa634ac98682e4dedced/src/renderer.ts#L14><code>Renderer</code></a> class.</p><h2 id=contribute>Contribute!</h2><p>Have an idea for a feature or want to report a bug? Feel free to open an <a href=https://github.com/robherley/go-test-action/issues>issue</a> or submit a <a href=https://github.com/robherley/go-test-action/pulls>pull request</a>!</p><p>Thanks for reading and happy testing! ðŸ§ª</p></div></article><div style="margin:2rem 0"><a style=float:left href=https://blog.reb.gg/posts/07-go-tiny-coffee/><i class="fas fa-angle-left"></i> Prev</a></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&text=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&is_video=false&description=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions&body=Check out this article: https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&title=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&name=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions&description=Was%20this%20made%20for%20humans%3f%20Although%20simple%2c%20Go%26rsquo%3bs%20default%20testing%20output%20leaves%20a%20lot%20to%20be%20desired%3a%0aThis%20has%20led%20rise%20to%20some%20other%20wrappers%20for%20go%20test%2c%20solely%20to%20be%20a%20better%20formatter%20for%20humans.%20For%20example%2c%20gotestsum%20does%20this%20quite%20well%3a%0aThis%20is%20definitely%20an%20improvement%2c%20and%20gotestsum%20even%20has%20additional%20formatting%20like%20exporting%20to%20JUnit%20XML.%0aBut%2c%20what%20if%20CI%20could%20produce%20a%20rich%2c%20interactive%2c%20summary%20like%20this%3a" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fblog.reb.gg%2fposts%2f08-beautify-go-tests%2f&t=%f0%9f%8e%a8%20Beautify%20your%20Go%20tests%20on%20GitHub%20Actions" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Rob Herley</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script></html>